define(["jquery"],function(i){return mod_form={id_name:null,id_videourl:null,fitem_id_videosize:null,fitem_id_showrel:null,fitem_id_showcontrols:null,fitem_id_showshowinfo:null,fitem_id_autoplay:null,init:function(o){mod_form.id_name=i("#id_name");mod_form.id_videourl=i("#id_videourl");mod_form.fitem_id_videosize=i("#fitem_id_videosize");mod_form.fitem_id_showrel=i("#fitem_id_showrel");mod_form.fitem_id_showcontrols=i("#fitem_id_showcontrols");mod_form.fitem_id_showshowinfo=i("#fitem_id_showshowinfo");mod_form.fitem_id_autoplay=i("#fitem_id_autoplay");mod_form.id_videourl.change(mod_form.id_videourl_change);mod_form.id_videourl_change();mod_form.upload_file(o)},upload_file:function(o){i("#id_videofile").change(function(){var o=i(".filepicker-filename").text();if(mod_form.id_name.val()==""){mod_form.id_name.val(o.slice(0,-4))}mod_form.id_videourl.val("[resource-file:"+o+"]");mod_form.id_videourl.prop("readonly",true);mod_form.id_videourl_change()})},id_videourl_change:function(){var o=mod_form.id_videourl.val();if(mod_form.testUrlResource(o)){mod_form.fitem_id_videosize.hide();mod_form.fitem_id_showrel.hide();mod_form.fitem_id_showcontrols.show();mod_form.fitem_id_showshowinfo.hide();mod_form.fitem_id_autoplay.show();mod_form.id_videourl.prop("readonly",true)}else if(mod_form.testUrlYouTube(o)){mod_form.fitem_id_videosize.show();mod_form.fitem_id_videosize.find("option").hide();mod_form.fitem_id_videosize.find("[value=0]").show();mod_form.fitem_id_videosize.find("[value=1]").show();mod_form.fitem_id_videosize.val(1);mod_form.fitem_id_showrel.show();mod_form.fitem_id_showcontrols.show();mod_form.fitem_id_showshowinfo.show();mod_form.fitem_id_autoplay.show()}else if(mod_form.testUrlVimeo(o)){mod_form.fitem_id_videosize.hide();mod_form.fitem_id_showrel.hide();mod_form.fitem_id_showcontrols.show();mod_form.fitem_id_showshowinfo.show();mod_form.fitem_id_autoplay.show()}else if(mod_form.testUrlDrive(o)){mod_form.fitem_id_videosize.show();mod_form.fitem_id_videosize.find("option").hide();mod_form.fitem_id_videosize.find("[value=5]").show();mod_form.fitem_id_videosize.find("[value=6]").show();mod_form.fitem_id_videosize.find("[value=7]").show();mod_form.fitem_id_videosize.val(7);mod_form.fitem_id_showrel.hide();mod_form.fitem_id_showcontrols.hide();mod_form.fitem_id_showshowinfo.hide();mod_form.fitem_id_autoplay.hide()}else{mod_form.fitem_id_videosize.hide();mod_form.fitem_id_showrel.hide();mod_form.fitem_id_showcontrols.hide();mod_form.fitem_id_showshowinfo.hide();mod_form.fitem_id_autoplay.hide()}},testUrlResource:function(o){var i=/(\[resource-file:).*/i;var e=i.exec(o);return e&&e[1]},testUrlYouTube:function(o){var i=/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i;var e=i.exec(o);return e&&e[1]},testUrlVimeo:function(o){var i=/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i;var e=i.exec(o);return e&&e[1]},testUrlDrive:function(o){var i=/https:\/\/(docs.google.com)\//i;var e=i.exec(o);return e&&e[1]}}});