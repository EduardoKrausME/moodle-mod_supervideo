define(["jquery","core/ajax","core/notification","core/templates","mod_supervideo/player_render"],function($,Ajax,Notification,Templates,PlayerRender){var modform={init:function(lang,courseinfo){modform.origem(courseinfo);modform.panda();modform.panda_youtube_vimeo(lang);var player=new PlayerRender;player.loadposter($,lang)},origem:function(courseinfo){let id_origem=$("#id_origem");if(courseinfo){id_origem.after(`<a id="kapture-open" class="btn btn-primary ml-2" style="padding:6px 18px;" 
                        href="${M.cfg.wwwroot}/mod/supervideo/vendor/kapture/?${courseinfo}">
                         ${M.util.get_string("record_kapture","supervideo")}   
                     </a>`);id_origem.focus(function(){var href=`${M.cfg.wwwroot}/mod/supervideo/vendor/kapture/?${courseinfo}&videotitle=${id_origem.val()}`;$("#kapture-open").attr("href",href)});id_origem.change(function(){if($(this).val()=="upload"){$("#kapture-open").show()}else{$("#kapture-open").hide()}})}},panda:function(){let id_videourl_panda=$("#id_videourl_panda");id_videourl_panda.after(`<div id="id_videourl_panda-videos"></div>`);let id_origem=$("#id_origem");id_origem.change(function(){if($(this).val()=="panda"){Ajax.call([{methodname:"mod_supervideo_panda_list_videos",args:{}}])[0].done(function(data){Templates.render("mod_supervideo/panda_list_videos",data).then(function(templatehtml){$("#id_videourl_panda-videos").html(templatehtml);$("#id_videourl_panda-videos .panda-item-video").click(function(){let videoid=$(this).attr("data-videoid");id_videourl_panda.val(videoid)})})}).fail(Notification.exception)}})},panda_youtube_vimeo:function(lang){let id_origem=$("#id_origem");id_origem.after(`<div id="banner_panda-videos" style="display:none;width:100%;"></div>`);$.ajax({url:`https://www.eduardokraus.com/logos/mod_supervideo/banneryoutube.json?lang=${lang}`,dataType:"json",success:function(data){console.log("JSON recebido com sucesso:",data);if(lang.toLowerCase().startsWith("pt")&&data.pt_br){$("#banner_panda-videos").html(data.pt_br)}else if(lang.toLowerCase().startsWith("en")&&data.en){$("#banner_panda-videos").html(data.en)}else{$("#banner_panda-videos").html(data.default)}},error:function(jqXHR,textStatus,errorThrown){console.error("Erro ao baixar o JSON:",textStatus,errorThrown)}});id_origem.change(function(){if($(this).val()=="youtube"||$(this).val()=="vimeo"){$("#banner_panda-videos").show()}else{$("#banner_panda-videos").hide()}})}};return modform});